@defer
{
    <!-- input box for adding new groceries to the list -->
    <div class = "top-div">
        <input id = "input" class = "input-box" placeholder = "Insert grocery item here." [(ngModel)] = "input">
        <button (click) = "addGrocery()" class = "header-button">ADD NEW ITEM</button>
    </div>  
    <div class = "table-div">
        <!-- generate a table which consists of the content from the database -->
        <table class = "groceries-table">
            @if(groceries.length > 0)
            {
                <thead class = "table-header"> 
                    <tr>
                        <th>Item</th>
                        <th>Price($)</th>
                        <th>Quantity</th>
                        <th>On Sale</th>
                    </tr>
                </thead>
            }
            <tbody>
                @for(row of groceries; track row.item_name)
                {
                    <tr>
                        <th>
                            <input class = "table-input" value = {{row.item_name}} readonly>
                        </th>
                        <th>
                            <!-- price allows decimal values, increment by 0.01 -->
                            <!-- only allows numerical values AND decimal point -->
                            <input class = "table-input" type = "number" value = "row.price" 
                            step = "0.01" min = "0.0" max = "999.9" maxlength = "6" 
                            [(ngModel)] = "row.price" (ngModelChange) = "updateValue(row)"
                            (keydown) = "onKeyDown($event)" (paste) = "onPaste($event)" (input) = "onInput($event)">
                        </th>
                        <th>
                            <!-- quantity allows decimal values, increment by 1 -->
                            <!-- note that any decimal values get converted to integers -->
                            <!-- only allows numerical values AND decimal point -->
                            <input class = "table-input" value = "row.quantity" type = "number" min = "0" max = "1000"
                            [(ngModel)] = "row.quantity" (ngModelChange) = "updateValue(row)"
                            (keydown) = "onKeyDown($event)" (paste) = "onPaste($event)" (input) = "onInput($event)">
                        </th>
                        <th>
                            <!-- consists of a dropdown that can update the groceries array -->
                            <select class = "table-input" 
                            [(ngModel)] = "row.on_sale" (ngModelChange) = "updateOnSale(row, $event)">
                                <option [ngValue] = "true">TRUE</option>
                                <option [ngValue] = "false">FALSE</option>
                            </select>
                        </th>
                        <!-- deletes the row off the display table and the database table -->
                        <button (click) = "deleteGrocery(row.item_name)" class = "table-button">DELETE</button>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
@loading(minimum 0.5s)
{
    <p class = "deferred-table-text">LOADING GROCERIES</p>
}
@error 
{
    <p class = "deferred-table-text">FAILED TO LOAD GROCERIES</p>
}